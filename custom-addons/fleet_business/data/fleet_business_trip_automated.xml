<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <!--$ Business Trip Automated -->

    <!-- <field name="filter_pre_domain">[('curr_deciding_overseer_id', '!=', False)]</field>
    <field name="filter_domain">[('state', 'in', ['draft','canceled'])]</field>
    <field name="trigger_field_ids" eval="[(6,0,[
      ref('fleet_business.field_fleet_business_trip__curr_deciding_overseer_id'),
      ref('fleet_business.field_fleet_business_trip__overseer_admin_id'),
      ref('fleet_business.field_fleet_business_trip__state'),
      ref('fleet_business.field_fleet_business_trip__approval_admin'),
    ])]"/> -->

    <record id="fleet_business_trip_create_first_journal_and_request_first_approval" model="base.automation">
      <field name="name">Fleet Business Trip Automation: Create first journal and request first approval</field>
      <field name="model_id" ref="fleet_business.model_fleet_business_trip"/>
      <field name="state">code</field>
      <field name="trigger">on_create</field>
      <field name="code">record.action_create_first_journal_and_request_first_approval()</field>
      <field name="active" eval="True"/>
    </record>

    <record id="fleet_business_trip_update_approved_to_ready_and_send_mass_mail" model="base.automation">
      <field name="name">Fleet Business Trip Automation: Update state ready and send mass mail reminder</field>
      <field name="model_id" ref="fleet_business.model_fleet_business_trip"/>
      <field name="state">code</field>
      <field name="trigger">on_time</field>
      <field name="code">record.action_update_state_and_send_mass_mail_reminder('ready')</field>
      <field name="active" eval="True"/>
      <field name="filter_domain">[('state', '=', 'approved')]</field>
      <field name="trg_date_id" search="[('model','=','fleet.business.trip'),('name','=','due_for_approval_time')]"/>
    </record>
    <record id="fleet_business_trip_update_ready_to_departing_and_send_mass_mail" model="base.automation">
      <field name="name">Fleet Business Trip Automation: Update state departing and send mass mail reminder</field>
      <field name="model_id" ref="fleet_business.model_fleet_business_trip"/>
      <field name="state">code</field>
      <field name="trigger">on_time</field>
      <field name="code">record.action_update_state_and_send_mass_mail_reminder('departing')</field>
      <field name="active" eval="True"/>
      <field name="filter_domain">[('state', '=', 'ready')]</field>
      <field name="trg_date_id" search="[('model','=','fleet.business.trip'),('name','=','pick_time')]"/>
      <field name="trg_date_range">-1</field>
      <field name="trg_date_range_type">day</field>
    </record>
    <!--! gonna need to use computed dates for returning -->
    <!-- <record id="fleet_business_update_departing_to_late_and_send__mass_mail_to_overseer" model="base.automation">
      <field name="name">Fleet Business Automation: Update state late and send mass mail to overseers</field>
      <field name="model_id" ref="fleet_business.model_fleet_business_trip"/>
      <field name="state">code</field>
      <field name="trigger">on_time</field>
      <field name="code">record.action_update_state_and_send_mass_mail_reminder('late')</field>
      <field name="active" eval="True"/>
      <field name="filter_domain">[('state', '=', 'departing')]</field>
      <field name="trg_date_id" search="[('model','=','fleet.business.trip'),('name','=','return_time')]"/>
    </record> -->

    <!--$ Supporte Automated -->
    <record id="fleet_business_rent_create_first_journal_and_request_first_approval" model="base.automation">
      <field name="name">Fleet Business Rent Automation: Create first journal and request first approval</field>
      <field name="model_id" ref="fleet_business.model_fleet_business_rent"/>
      <field name="state">code</field>
      <field name="trigger">on_create</field>
      <field name="code">record.action_create_first_journal_and_request_first_approval()</field>
      <field name="active" eval="True"/>
    </record>

    <record id="fleet_business_rent_update_approved_to_ready_and_send_mass_mail" model="base.automation">
      <field name="name">Fleet Business Rent Automation: Update state ready and send mass mail reminder</field>
      <field name="model_id" ref="fleet_business.model_fleet_business_rent"/>
      <field name="state">code</field>
      <field name="trigger">on_time</field>
      <field name="code">record.action_update_state_and_send_mass_mail_reminder('ready')</field>
      <field name="active" eval="True"/>
      <field name="filter_domain">[('state', '=', 'approved')]</field>
      <field name="trg_date_id" search="[('model','=','fleet.business.rent'),('name','=','due_for_approval_time')]"/>
    </record>
    <record id="fleet_business_rent_update_ready_to_departing_and_send_mass_mail" model="base.automation">
      <field name="name">Fleet Business Rent Automation: Update state departing and send mass mail reminder</field>
      <field name="model_id" ref="fleet_business.model_fleet_business_rent"/>
      <field name="state">code</field>
      <field name="trigger">on_time</field>
      <field name="code">record.action_update_state_and_send_mass_mail_reminder('departing')</field>
      <field name="active" eval="True"/>
      <field name="filter_domain">[('state', '=', 'ready')]</field>
      <field name="trg_date_id" search="[('model','=','fleet.business.rent'),('name','=','pick_time')]"/>
      <field name="trg_date_range">-1</field>
      <field name="trg_date_range_type">day</field>
    </record>

  </data>
</odoo>
