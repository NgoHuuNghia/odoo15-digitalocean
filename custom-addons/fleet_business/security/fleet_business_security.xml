<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <data>
  
    <record id="fleet_business_trip_rule_user" model="ir.rule">
      <field name="name">Users can see any trips that is related to them in any way</field>
      <field name="model_id" ref="model_fleet_business_trip"/>
      <field name="groups" eval="[(4, ref('fleet.fleet_group_user'))]"/>
      <field name="perm_read" eval="True"/>
      <field name="perm_write" eval="True"/>
      <field name="perm_create" eval="True"/>
      <field name="perm_unlink" eval="False"/>
      <field name="domain_force">['&amp;','|','|','|','|','|','|',
        ('create_uid','=',user.id),
        ('overseer_creator_id','=',user.employee_id.id),
        ('overseer_manager_id','=',user.employee_id.id),
        ('overseer_admin_id','=',user.employee_id.id),
        ('overseer_fleet_id','=',user.employee_id.id),
        ('attending_employee_ids','in',[user.employee_id.id]),
        ('driver_id','=',user.employee_id.id),
        (len(user.employee_id), '=', 1),
      ]</field>
    </record>

    <record id="fleet_business_trip_rule_manager" model="ir.rule">
      <field name="name">Managers can see all trips</field>
      <field name="model_id" ref="model_fleet_business_trip"/>
      <field name="groups" eval="[(4, ref('fleet.fleet_group_manager'))]"/>
      <field name="perm_read" eval="True"/>
      <field name="perm_write" eval="True"/>
      <field name="perm_create" eval="True"/>
      <field name="perm_unlink" eval="True"/>
    </record>

    <!--? start of editing existing fleet's record rules -->
    <function name="write" model="ir.model.data">
      <function name="search" model="ir.model.data">
          <value eval="[('module', '=', 'fleet'), ('name', '=', 'fleet_rule_vehicle_visibility_user')]"/>
      </function>
      <value eval="{'noupdate': False}" />
    </function>

    <record id="fleet.fleet_rule_vehicle_visibility_user" model="ir.rule">
      <field name="name">User can only see his/her vehicle</field>
      <field name="model_id" ref="fleet.model_fleet_vehicle"/>
      <field name="groups" eval="[(4, ref('fleet.fleet_group_user'))]"/>
      <field name="perm_read" eval="True"/>
      <field name="perm_write" eval="False"/>
      <field name="perm_create" eval="False"/>
      <field name="perm_unlink" eval="False"/>
      <field name="domain_force"></field>
    </record>

    <function name="write" model="ir.model.data"> 
      <function name="search" model="ir.model.data"> 
          <value eval="[('module', '=', 'fleet'), ('name','=','fleet_rule_vehicle_visibility_user')] "/> 
      </function> 
      <value eval =" {'noupdate': True} "/> 
    </function>
    <!--? end of editing existing fleet's record rules -->

  </data>
  
</odoo>
